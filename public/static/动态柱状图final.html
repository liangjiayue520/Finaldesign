<html style="height: 100%">
	<head>
		<meta charset="utf-8">
	</head>
	<body style="height: 100%; margin: 0">
		<div id="container" style="height: 100%"></div>
		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
		<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
		<script type="text/javascript" src="dark.js"></script>
		<script type="text/javascript">
			var dom = document.getElementById("container");
			var myChart = echarts.init(dom);
			var app = {};

			var option;



			var updateFrequency = 2000;
			var dimension = 0;

			var appColors = {
				"钉钉": "#00008b",
				"腾讯会议": "#f00",
				"企业微信": "#ffde00",
				"剪映": "#002a8f",
				"TestFlight": "#003580",
				"快手": "#ed2939",
				"脑洞大师": "#ff55ff",
				"微视": "#003897",
				"西瓜视频": "#f93",
				"阳光养猪场": "#bc002d",
			};

			var data = [
				["Income", "Life Expectancy", "Population", "Country", "Year"],
				[257259, 34.05, 351014, "钉钉", 1],
				[93185, 39, 645526, "腾讯会议", 1],
				[49431, 32, 321675013, "企业微信", 1],
				[117427, 32.2, 345043, "剪映", 1],
				[190261, 36.5731262, 977662, "TestFlight", 1],
				[91139, 33.96717024, 29355111, "快手", 1],
				[112954, 38.37, 22886919, "脑洞大师", 1],
				[216375, 42.84559912, 61428, "微视", 1],
				[91743, 25.4424, 168574895, "西瓜视频", 1],
				[110469, 36.4, 30294378, "阳光养猪场", 1],
				[266996, 34.05, 342440, "钉钉", 2],
				[140735, 39.01496774, 727603, "腾讯会议", 2],
				[115954, 32, 350542958, "企业微信", 2],
				[146656, 33.64, 470176, "剪映", 2],
				[142209, 36.9473378, 1070625, "TestFlight", 2],
				[104445, 37.4, 30293172, "快手", 2],
				[112613, 38.37, 23882461, "脑洞大师", 2],
				[129115, 43.13915533, 61428, "微视", 2],
				[68445, 25.4424, 171940819, "西瓜视频", 2],
				[109604, 36.40397538, 30645903, "阳光养猪场", 2],
				[276305, 34.05, 334002, "钉钉", 3],
				[198334, 39.02993548, 879432, "腾讯会议", 3],
				[144404, 32, 380055273, "企业微信", 3],
				[129872, 35.04, 607664, "剪映", 3],
				[117145, 37.29122269, 1190807, "TestFlight", 3],
				[137489, 39.21, 31549988, "快手", 3],
				[112608, 38.37, 25507768, "脑洞大师", 3],
				[93869, 36.56365268, 62498, "微视", 3],
				[56145, 25.4424, 176225709, "西瓜视频", 3],
				[110079, 36.40795077, 30993147, "阳光养猪场", 3],
				[303759, 34.05, 348143, "钉钉", 4],
				[146886, 39.04490323, 1202146, "腾讯会议", 4],
				[238908, 32, 402373519, "企业微信", 4],
				[120730, 35.74, 772812, "剪映", 4],
				[113453, 36.29644969, 1327905, "TestFlight", 4],
				[147086, 39.56, 33174810, "快手", 4],
				[112600, 38.37, 28016571, "脑洞大师", 4],
				[112639, 40.5022162, 65604, "微视", 4],
				[52213, 25.4424, 182214537, "西瓜视频", 4],
				[109678, 36.41192615, 31330455, "阳光养猪场", 4],
				[306252, 34.05, 434095, "钉钉", 5],
				[227963, 40.19012, 1745604, "腾讯会议", 5],
				[276528, 32, 411213424, "企业微信", 5],
				[187660, 36.48, 975565, "剪映", 5],
				[114710, 41.46900965, 1467238, "TestFlight", 5],
				[127960, 40.37, 34854476, "快手", 5],
				[113320, 38.37, 31016143, "脑洞大师", 5],
				[123532, 31.97, 70010, "微视", 5],
				[67438, 25.4424, 189298397, "西瓜视频", 5],
				[110213, 36.41590154, 31663783, "阳光养猪场", 5],
				[307941, 34.05, 742619, "钉钉", 6],
				[257328, 40.985432, 2487811, "腾讯会议", 6],
				[267635, 32, 402711280, "企业微信", 6],
				[220250, 36.26, 1181650, "剪映", 6],
				[139327, 37.35415172, 1607810, "TestFlight", 6],
				[147002, 43.28, 36277905, "快手", 6],
				[113004, 38.37, 33663143, "脑洞大师", 6],
				[145893, 36.61, 74711, "微视", 6],
				[89115, 25.4424, 196657653, "西瓜视频", 6],
				[110525, 36.41987692, 32223184, "阳光养猪场", 6],
				[320346, 34.05, 1256048, "钉钉", 7],
				[268316, 41.541504, 3231465, "腾讯会议", 7],
				[276075, 28.85, 380047548, "企业微信", 7],
				[206820, 36.24, 1324000, "剪映", 7],
				[137698, 38.15099864, 1734254, "TestFlight", 7],
				[128452, 43.33, 37461341, "快手", 7],
				[112848, 38.37, 36383150, "脑洞大师", 7],
				[176647, 19.76, 79662, "微视", 7],
				[104733, 23, 204966302, "西瓜视频", 7],
				[109782, 36.42385231, 33176900, "阳光养猪场", 7],
				[310033, 34.05, 1724213, "钉钉", 8],
				[267740, 42.460624, 3817167, "腾讯会议", 8],
				[276681, 31.95714286, 363661158, "企业微信", 8],
				[208253, 29.66, 1424672, "剪映", 8],
				[140819, 45.66140699, 1847468, "TestFlight", 8],
				[127926, 36.41, 38170355, "快手", 8],
				[113037, 38.37, 39702235, "脑洞大师", 8],
				[145947, 38.37, 84941, "微视", 8],
				[134427, 25.4424, 213725049, "西瓜视频", 8],
				[110529, 36.59264, 34638021, "阳光养猪场", 8],
				[314649, 39.34215686, 2253007, "钉钉", 9],
				[275763, 44.512464, 4360348, "腾讯会议", 9],
				[247372, 32, 365544192, "企业微信", 9],
				[174290, 36.84, 1555081, "剪映", 9],
				[144252, 39.67, 2047577, "TestFlight", 9],
				[117154, 42.73, 39014053, "快手", 9],
				[113015, 38.905, 43577358, "脑洞大师", 9],
				[159652, 42.32, 90546, "微视", 9],
				[228698, 25.4424, 223020377, "西瓜视频", 9],
				[110031, 37.03648, 36826469, "阳光养猪场", 9],
				[304325, 44.63431373, 3088808, "钉钉", 10],
				[275954, 45.12972, 4908078, "腾讯会议", 10],
				[247026, 32, 377135349, "企业微信", 10],
				[146134, 39.54, 1658274, "剪映", 10],
				[116417, 44.61, 2358344, "TestFlight", 10],
				[92950, 43.36, 40015501, "快手", 10],
				[112843, 40.91, 48211294, "脑洞大师", 10],
				[146438, 36.58, 96517, "微视", 10],
				[225468, 24.384, 232819584, "西瓜视频", 10],
				[110307, 37.67568, 39878734, "阳光养猪场", 10],
				[304318, 49.92647059, 3743708, "钉钉", 11],
				[275537, 48.288448, 5530806, "腾讯会议", 11],
				[206504, 32, 395184556, "企业微信", 11],
				[177107, 33.11248, 1762227, "剪映", 11],
				[133125, 41.8, 2633389, "TestFlight", 11],
				[110798, 45.08, 40628638, "快手", 11],
				[113107, 43.915, 55293434, "脑洞大师", 11],
				[136399, 46.64, 102913, "微视", 11],
				[268875, 18.35, 243073946, "西瓜视频", 11],
				[110266, 38.6, 44040263, "阳光养猪场", 11],
				[313846, 49.92647059, 3743708, "钉钉", 12],
				[276288, 48.288448, 5530806, "腾讯会议", 12],
				[205989, 32, 395184556, "企业微信", 12],
				[209956, 33.11248, 1762227, "剪映", 12],
				[176362, 41.8, 2633389, "TestFlight", 12],
				[119334, 45.08, 40628638, "快手", 12],
				[112459, 43.915, 55293434, "脑洞大师", 12],
				[145869, 46.64, 102913, "微视", 12],
				[239244, 18.35, 243073946, "西瓜视频", 12],
				[110285, 38.6, 44040263, "阳光养猪场", 12],
				[321571, 49.92647059, 3743708, "钉钉", 13],
				[269122, 48.288448, 5530806, "腾讯会议", 13],
				[177224, 32, 395184556, "企业微信", 13],
				[272161, 33.11248, 1762227, "剪映", 13],
				[161944, 41.8, 2633389, "TestFlight", 13],
				[118514, 45.08, 40628638, "快手", 13],
				[112785, 43.915, 55293434, "脑洞大师", 13],
				[136772, 46.64, 102913, "微视", 13],
				[207581, 18.35, 243073946, "西瓜视频", 13],
				[109695, 38.6, 44040263, "阳光养猪场", 13],
				[309923, 49.92647059, 3743708, "钉钉", 14],
				[267346, 48.288448, 5530806, "腾讯会议", 14],
				[177205, 32, 395184556, "企业微信", 14],
				[276998, 33.11248, 1762227, "剪映", 14],
				[129884, 41.8, 2633389, "TestFlight", 14],
				[110012, 45.08, 40628638, "快手", 14],
				[109890, 43.915, 55293434, "脑洞大师", 14],
				[147122, 46.64, 102913, "微视", 14],
				[207914, 18.35, 243073946, "西瓜视频", 14],
				[113392, 38.6, 44040263, "阳光养猪场", 14],
				[314620, 49.92647059, 3743708, "钉钉", 15],
				[267377, 48.288448, 5530806, "腾讯会议", 15],
				[176290, 32, 395184556, "企业微信", 15],
				[274814, 33.11248, 1762227, "剪映", 15],
				[128501, 41.8, 2633389, "TestFlight", 15],
				[99974, 45.08, 40628638, "快手", 15],
				[106831, 43.915, 55293434, "脑洞大师", 15],
				[136767, 46.64, 102913, "微视", 15],
				[207713, 18.35, 243073946, "西瓜视频", 15],
				[113808, 38.6, 44040263, "阳光养猪场", 15],
				[313347, 49.92647059, 3743708, "钉钉", 16],
				[276200, 48.288448, 5530806, "腾讯会议", 16],
				[161696, 32, 395184556, "企业微信", 16],
				[267796, 33.11248, 1762227, "剪映", 16],
				[128690, 41.8, 2633389, "TestFlight", 16],
				[84499, 45.08, 40628638, "快手", 16],
				[108227, 43.915, 55293434, "脑洞大师", 16],
				[137368, 46.64, 102913, "微视", 16],
				[206454, 18.35, 243073946, "西瓜视频", 16],
				[112243, 38.6, 44040263, "阳光养猪场", 16],
				[317715, 49.92647059, 3743708, "钉钉", 17],
				[275555, 48.288448, 5530806, "腾讯会议", 17],
				[146788, 32, 395184556, "企业微信", 17],
				[233892, 33.11248, 1762227, "剪映", 17],
				[116239, 41.8, 2633389, "TestFlight", 17],
				[82514, 45.08, 40628638, "快手", 17],
				[78961, 43.915, 55293434, "脑洞大师", 17],
				[119542, 46.64, 102913, "微视", 17],
				[137173, 18.35, 243073946, "西瓜视频", 17],
				[112263, 38.6, 44040263, "阳光养猪场", 17],
				[308458, 49.92647059, 3743708, "钉钉", 18],
				[275639, 48.288448, 5530806, "腾讯会议", 18],
				[226904, 32, 395184556, "企业微信", 18],
				[247312, 33.11248, 1762227, "剪映", 18],
				[194924, 41.8, 2633389, "TestFlight", 18],
				[80809, 45.08, 40628638, "快手", 18],
				[90410, 43.915, 55293434, "脑洞大师", 18],
				[140462, 46.64, 102913, "微视", 18],
				[112217, 18.35, 243073946, "西瓜视频", 18],
				[113140, 38.6, 44040263, "阳光养猪场", 18],
				[313251, 49.92647059, 3743708, "钉钉", 19],
				[275896, 48.288448, 5530806, "腾讯会议", 19],
				[207911, 32, 395184556, "企业微信", 19],
				[268906, 33.11248, 1762227, "剪映", 19],
				[146133, 41.8, 2633389, "TestFlight", 19],
				[83968, 45.08, 40628638, "快手", 19],
				[37493, 43.915, 55293434, "脑洞大师", 19],
				[177410, 46.64, 102913, "微视", 19],
				[125314, 18.35, 243073946, "西瓜视频", 19],
				[112498, 38.6, 44040263, "阳光养猪场", 19],
				[304489, 49.92647059, 3743708, "钉钉", 20],
				[276515, 48.288448, 5530806, "腾讯会议", 20],
				[206941, 32, 395184556, "企业微信", 20],
				[268943, 33.11248, 1762227, "剪映", 20],
				[237656, 41.8, 2633389, "TestFlight", 20],
				[79123, 45.08, 40628638, "快手", 20],
				[53250, 43.915, 55293434, "脑洞大师", 20],
				[177221, 46.64, 102913, "微视", 20],
				[139965, 18.35, 243073946, "西瓜视频", 20],
				[113175, 38.6, 44040263, "阳光养猪场", 20],
				[316916, 49.92647059, 3743708, "钉钉", 21],
				[274829, 48.288448, 5530806, "腾讯会议", 21],
				[188558, 32, 395184556, "企业微信", 21],
				[268671, 33.11248, 1762227, "剪映", 21],
				[207407, 41.8, 2633389, "TestFlight", 21],
				[83356, 45.08, 40628638, "快手", 21],
				[66067, 43.915, 55293434, "脑洞大师", 21],
				[157756, 46.64, 102913, "微视", 21],
				[129691, 18.35, 243073946, "西瓜视频", 21],
				[113063, 38.6, 44040263, "阳光养猪场", 21],
				[314467, 49.92647059, 3743708, "钉钉", 22],
				[275611, 48.288448, 5530806, "腾讯会议", 22],
				[128190, 32, 395184556, "企业微信", 22],
				[246984, 33.11248, 1762227, "剪映", 22],
				[161705, 41.8, 2633389, "TestFlight", 22],
				[89691, 45.08, 40628638, "快手", 22],
				[112922, 43.915, 55293434, "脑洞大师", 22],
				[194002, 46.64, 102913, "微视", 22],
				[153835, 18.35, 243073946, "西瓜视频", 22],
				[109898, 38.6, 44040263, "阳光养猪场", 22],
				[307865, 49.92647059, 3743708, "钉钉", 23],
				[268307, 48.288448, 5530806, "腾讯会议", 23],
				[137249, 32, 395184556, "企业微信", 23],
				[162039, 33.11248, 1762227, "剪映", 23],
				[153411, 41.8, 2633389, "TestFlight", 23],
				[85799, 45.08, 40628638, "快手", 23],
				[112559, 43.915, 55293434, "脑洞大师", 23],
				[244214, 46.64, 102913, "微视", 23],
				[129193, 18.35, 243073946, "西瓜视频", 23],
				[82151, 38.6, 44040263, "阳光养猪场", 23],
				[319845, 49.92647059, 3743708, "钉钉", 24],
				[274763, 48.288448, 5530806, "腾讯会议", 24],
				[129497, 32, 395184556, "企业微信", 24],
				[199117, 33.11248, 1762227, "剪映", 24],
				[147065, 41.8, 2633389, "TestFlight", 24],
				[87028, 45.08, 40628638, "快手", 24],
				[106818, 43.915, 55293434, "脑洞大师", 24],
				[232791, 46.64, 102913, "微视", 24],
				[92222, 18.35, 243073946, "西瓜视频", 24],
				[93492, 38.6, 44040263, "阳光养猪场", 24],
				[310619, 49.92647059, 3743708, "钉钉", 25],
				[276577, 48.288448, 5530806, "腾讯会议", 25],
				[176424, 32, 395184556, "企业微信", 25],
				[267129, 33.11248, 1762227, "剪映", 25],
				[133832, 41.8, 2633389, "TestFlight", 25],
				[91828, 45.08, 40628638, "快手", 25],
				[110046, 43.915, 55293434, "脑洞大师", 25],
				[208260, 46.64, 102913, "微视", 25],
				[89693, 18.35, 243073946, "西瓜视频", 25],
				[71947, 38.6, 44040263, "阳光养猪场", 25],
				[308336, 49.92647059, 3743708, "钉钉", 26],
				[275811, 48.288448, 5530806, "腾讯会议", 26],
				[145976, 32, 395184556, "企业微信", 26],
				[220127, 33.11248, 1762227, "剪映", 26],
				[146451, 41.8, 2633389, "TestFlight", 26],
				[91883, 45.08, 40628638, "快手", 26],
				[109728, 43.915, 55293434, "脑洞大师", 26],
				[174067, 46.64, 102913, "微视", 26],
				[90347, 18.35, 243073946, "西瓜视频", 26],
				[76165, 38.6, 44040263, "阳光养猪场", 26],
				[310735, 49.92647059, 3743708, "钉钉", 27],
				[276160, 48.288448, 5530806, "腾讯会议", 27],
				[186950, 32, 395184556, "企业微信", 27],
				[218462, 33.11248, 1762227, "剪映", 27],
				[170525, 41.8, 2633389, "TestFlight", 27],
				[109203, 45.08, 40628638, "快手", 27],
				[108220, 43.915, 55293434, "脑洞大师", 27],
				[149053, 46.64, 102913, "微视", 27],
				[81707, 18.35, 243073946, "西瓜视频", 27],
				[75900, 38.6, 44040263, "阳光养猪场", 27],
				[302728, 49.92647059, 3743708, "钉钉", 28],
				[274006, 48.288448, 5530806, "腾讯会议", 28],
				[227809, 32, 395184556, "企业微信", 28],
				[248394, 33.11248, 1762227, "剪映", 28],
				[174167, 41.8, 2633389, "TestFlight", 28],
				[108982, 45.08, 40628638, "快手", 28],
				[108895, 43.915, 55293434, "脑洞大师", 28],
				[160012, 46.64, 102913, "微视", 28],
				[79204, 18.35, 243073946, "西瓜视频", 28],
				[74697, 38.6, 44040263, "阳光养猪场", 28],
				[308269, 49.92647059, 3743708, "钉钉", 29],
				[275092, 48.288448, 5530806, "腾讯会议", 29],
				[137034, 32, 395184556, "企业微信", 29],
				[232606, 33.11248, 1762227, "剪映", 29],
				[199104, 41.8, 2633389, "TestFlight", 29],
				[105580, 45.08, 40628638, "快手", 29],
				[107749, 43.915, 55293434, "脑洞大师", 29],
				[173175, 46.64, 102913, "微视", 29],
				[78830, 18.35, 243073946, "西瓜视频", 29],
				[74707, 38.6, 44040263, "阳光养猪场", 29],
			]
			//console.log(data);
			var years = [];
			for (var i = 0; i < data.length; ++i) {
				if (years.length === 0 || years[years.length - 1] !== data[i][4]) {
					years.push(data[i][4]);
				}
			}
			//console.log(years);



			var startIndex = 0;
			var startYear = years[startIndex];

			var option = {
				backgroundColor: '#000000',
				title: {
					text: "20年2月份IOS用户手机app日均下载量",
					top: "2%",
					left: "37%",
					textStyle: {
						fontSize: 20,
						color: "#fff",
					},
				},
				grid: {
					top: "10%",
					bottom: 30,
					left: 150,
					right: 80
				},
				xAxis: {
					max: 'dataMax',
					label: {
						formatter: function(n) {
							return Math.round(n);
						}
					}
				},
				dataset: {
					source: data.slice(1).filter(function(d) {
						return d[4] === startYear;
					})
				},
				yAxis: {
					type: 'category',
					inverse: true,
					// max:3,
					max: 9,
					axisLabel: {
						show: true,
						textStyle: {
							fontSize: 14,
							color: "#ffffff",
						},
						rich: {
							flag: {
								fontSize: 25,
								padding: 5,
								color: "#ffffff",
							}
						}
					},
					animationDuration: 300,
					animationDurationUpdate: 300
				},
				series: [{
					realtimeSort: true,
					seriesLayoutBy: 'column',
					type: 'bar',
					itemStyle: {
						color: function(param) {
							// console.log(param);
							return appColors[param.value[3]] || '#5470c6';
						}
					},
					encode: {
						x: dimension,
						y: 3
					},
					label: {
						show: true,
						precision: 1,
						position: 'right',
						valueAnimation: true,
						fontFamily: 'monospace'
					}
				}],
				// Disable init animation.
				animationDuration: 0,
				animationDurationUpdate: updateFrequency,
				animationEasing: 'linear',
				animationEasingUpdate: 'linear',
				graphic: {
					elements: [{
						type: 'text',
						right: 160,
						bottom: 60,
						style: {
							text: startYear,
							font: 'bolder 40px monospace',
							fill: '#fff'
						},
						z: 100
					}]
				}
			};

			myChart.setOption(option);

			for (var i = startIndex; i < years.length - 1; ++i) {
				// console.log(i-startIndex);
				(function(i) {
					setTimeout(function() {
						updateYear(years[i + 1]);
					}, (i - startIndex) * updateFrequency);
				})(i);
			}


			function updateYear(year) {
				var source = data.slice(1).filter(function(d) {

					return d[4] === year;
				});

				option.series[0].data = source;
				var m;
				m = '2月' + year + '号';
				// console.log(m);
				option.graphic.elements[0].style.text = m;
				myChart.setOption(option);
			}
			if (option && typeof option === 'object') {
				myChart.setOption(option);
			}
		</script>
	</body>
</html>
